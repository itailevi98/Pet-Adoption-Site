{"ast":null,"code":"var _jsxFileName = \"/Users/itailevi/Documents/ITC/Pet Adoption Site/client/src/components/Admin/AdminEditPet/FormComponent.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useHistory, withRouter } from \"react-router\";\nimport { editPet, getPetById } from \"../../../lib/petsApi\";\nimport styles from \"./editPet.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction FormComponent(props) {\n  _s();\n\n  const {\n    petId\n  } = props;\n  const [inputs, setInputs] = useState({});\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [adoptionStatus, setAdoptionStatus] = useState(\"\");\n  const [hypoallergenic, setHypoallergenic] = useState(false);\n  const [petPicture, setPetPicture] = useState();\n  const history = useHistory();\n\n  function handleOnChange(event) {\n    const files = event.target.files;\n    const type = event.target.type;\n    const value = event.target.value;\n    const name = event.target.name;\n    const prev = { ...inputs\n    };\n\n    if (type === \"file\") {\n      setPetPicture(files[0]);\n      delete prev.petPicture;\n      setInputs(prev);\n      return;\n    }\n\n    if (name === \"type\" && value === \"Select an option...\") {\n      if (prev.type) {\n        delete prev.type;\n        setInputs(prev);\n      }\n\n      return;\n    }\n\n    prev[name] = value;\n    setInputs(prev);\n  }\n\n  async function handleOnSubmit(event) {\n    event.preventDefault();\n    setLoading(true);\n    const prev = inputs;\n    prev[\"hypoallergenic\"] = hypoallergenic;\n    prev[\"adoptionStatus\"] = adoptionStatus;\n    const fd = new FormData();\n    fd.append(\"petPicture\", petPicture);\n\n    for (let key in prev) {\n      fd.append(key, prev[key]);\n    }\n\n    try {\n      await editPet(fd, petId);\n      setSuccess(true);\n      setError(false);\n      setLoading(false);\n      setTimeout(() => {\n        history.go(0);\n      }, 3000);\n    } catch (err) {\n      setError(true);\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    async function fetchPet() {\n      const pet = await getPetById(petId);\n      const {\n        type,\n        picture,\n        name,\n        height,\n        weight,\n        color,\n        bio,\n        dietary_restrictions,\n        breed\n      } = pet;\n      if (pet.hypoallergenic === 1) setHypoallergenic(true);else setHypoallergenic(false);\n      setAdoptionStatus(pet.adoption_status);\n      setInputs({\n        type,\n        petName: name,\n        height,\n        weight,\n        color,\n        bio,\n        dietaryRestrictions: dietary_restrictions,\n        breed,\n        petPicture: picture\n      });\n    }\n\n    fetchPet();\n  }, [petId]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"container d-flex flex-column justify-content-center\",\n    onSubmit: event => handleOnSubmit(event),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.imageContainer,\n      children: [inputs.petPicture !== \"null\" && /*#__PURE__*/_jsxDEV(\"img\", {\n        className: styles.petPicture,\n        src: inputs.petPicture,\n        alt: \"Pet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 50\n      }, this), inputs.petPicture === \"null\" && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"my-auto\",\n        children: \"No Pet Picture Found!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 50\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"type\",\n      className: \"col-form-label\",\n      children: \"Animal Type:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: inputs.type,\n      className: \"form-select\",\n      name: \"type\",\n      onChange: event => handleOnChange(event),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"Select an option...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Dog\",\n        children: \"Dog\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Cat\",\n        children: \"Cat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Parrot\",\n        children: \"Parrot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Hamster\",\n        children: \"Hamster\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Rabbit\",\n        children: \"Rabbit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Ferret\",\n        children: \"Ferret\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Mouse\",\n        children: \"Mouse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Spider\",\n        children: \"Spider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Turtle\",\n        children: \"Turtle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Snake\",\n        children: \"Snake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Iguana\",\n        children: \"Iguana\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Other\",\n        children: \"Other\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"petName\",\n      className: \"col-form-label\",\n      children: \"Pet Name:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"petName\",\n      name: \"petName\",\n      onChange: event => handleOnChange(event),\n      value: inputs.petName ? inputs.petName : \"\",\n      placeholder: \"Required\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"mt-3\",\n      children: \"Pet Status:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: () => {\n            setAdoptionStatus(\"ADOPTED\");\n          },\n          className: \"form-check-input\",\n          type: \"radio\",\n          name: \"adopted-status\",\n          id: \"adopted-status\",\n          checked: adoptionStatus === \"ADOPTED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"adopted-status\",\n          children: \"Adopted\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: () => {\n            setAdoptionStatus(\"FOSTERED\");\n          },\n          className: \"form-check-input\",\n          type: \"radio\",\n          name: \"fostered-status\",\n          id: \"fostered-status\",\n          checked: adoptionStatus === \"FOSTERED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"fostered-status\",\n          children: \"Fostered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: () => {\n            setAdoptionStatus(\"AVAILABLE\");\n          },\n          className: \"form-check-input\",\n          type: \"radio\",\n          name: \"availabe-status\",\n          id: \"available-status\",\n          checked: adoptionStatus === \"AVAILABLE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"available-status\",\n          children: \"Available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"petPicture\",\n      className: \"col-form-label\",\n      children: \"Upload A New Picture:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      className: \"form-control\",\n      id: \"petPicture\",\n      name: \"petPicture\",\n      onChange: event => handleOnChange(event),\n      accept: \"image/*\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"height\",\n      className: \"col-form-label\",\n      children: \"Height (in m, round to the nearest hundredth):\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"height\",\n      name: \"height\",\n      step: \".01\",\n      onChange: event => handleOnChange(event),\n      value: inputs.height ? inputs.height : \"\",\n      placeholder: \"Required\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"weight\",\n      className: \"col-form-label\",\n      children: \"Weight (in kg, round to the nearest hundredth):\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"weight\",\n      name: \"weight\",\n      step: \".01\",\n      onChange: event => handleOnChange(event),\n      value: inputs.weight ? inputs.weight : \"\",\n      placeholder: \"Required\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"color\",\n      className: \"col-form-label\",\n      children: \"Color:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"color\",\n      name: \"color\",\n      onChange: event => handleOnChange(event),\n      value: inputs.color ? inputs.color : \"\",\n      placeholder: \"Required\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"bio\",\n      className: \"col-form-label\",\n      children: \"Bio:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"bio\",\n      name: \"bio\",\n      onChange: event => handleOnChange(event),\n      value: inputs.bio ? inputs.bio : \"\",\n      placeholder: \"Required\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"mt-3\",\n        children: \"Hypoallergenic:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: () => {\n            setHypoallergenic(!hypoallergenic);\n          },\n          className: \"form-check-input\",\n          type: \"radio\",\n          name: \"hypoallergenic-yes\",\n          id: \"hypoallergenic-yes\",\n          checked: hypoallergenic\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"hypoallergenic-yes\",\n          children: \"Yes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: () => {\n            setHypoallergenic(!hypoallergenic);\n          },\n          className: \"form-check-input\",\n          type: \"radio\",\n          name: \"hypoallergenic-no\",\n          id: \"hypoallergenic-no\",\n          checked: !hypoallergenic\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"hypoallergenic-no\",\n          children: \"No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"dietaryRestrictions\",\n      className: \"col-form-label\",\n      children: \"Dietary Restrictions:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"dietaryRestrictions\",\n      name: \"dietaryRestrictions\",\n      onChange: event => handleOnChange(event),\n      value: inputs.dietaryRestrictions ? inputs.dietaryRestrictions : \"\",\n      placeholder: \"Required\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"breed\",\n      className: \"col-form-label\",\n      children: \"Breed:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"breed\",\n      name: \"breed\",\n      onChange: event => handleOnChange(event),\n      value: inputs.breed ? inputs.breed : \"\",\n      placeholder: \"Required\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }, this), !loading && /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary mt-2 mb-3 w-50 mx-auto\",\n      children: \"Update Pet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 26\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-success\",\n      role: \"alert\",\n      children: \"Pet has been edited\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 17\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center mt-3 mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border text-primary\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 25\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Error adding pet:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Make sure all the fields are in the correct format\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Make sure all the required fields are filled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n}\n\n_s(FormComponent, \"fOwo2Uoq/emleGU41J31lnsYEco=\", false, function () {\n  return [useHistory];\n});\n\n_c = FormComponent;\nexport default _c2 = withRouter(FormComponent);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"FormComponent\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/itailevi/Documents/ITC/Pet Adoption Site/client/src/components/Admin/AdminEditPet/FormComponent.jsx"],"names":["useEffect","useState","useHistory","withRouter","editPet","getPetById","styles","FormComponent","props","petId","inputs","setInputs","success","setSuccess","error","setError","loading","setLoading","adoptionStatus","setAdoptionStatus","hypoallergenic","setHypoallergenic","petPicture","setPetPicture","history","handleOnChange","event","files","target","type","value","name","prev","handleOnSubmit","preventDefault","fd","FormData","append","key","setTimeout","go","err","fetchPet","pet","picture","height","weight","color","bio","dietary_restrictions","breed","adoption_status","petName","dietaryRestrictions","imageContainer"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useHistory, withRouter } from \"react-router\";\nimport { editPet, getPetById } from \"../../../lib/petsApi\";\nimport styles from \"./editPet.module.css\";\n\nfunction FormComponent(props) {\n    const { petId } = props;\n    const [inputs, setInputs] = useState({});\n    const [success, setSuccess] = useState(false);\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [adoptionStatus, setAdoptionStatus] = useState(\"\");\n    const [hypoallergenic, setHypoallergenic] = useState(false);\n    const [petPicture, setPetPicture] = useState();\n    const history = useHistory();\n\n    function handleOnChange(event) {\n        const files = event.target.files;\n        const type = event.target.type;\n        const value = event.target.value;\n        const name = event.target.name;\n        const prev = { ...inputs };\n        if (type === \"file\") {\n            setPetPicture(files[0]);\n            delete prev.petPicture;\n            setInputs(prev);\n            return;\n        }\n        if (name === \"type\" && value === \"Select an option...\") {\n            if (prev.type) {\n                delete prev.type;\n                setInputs(prev);\n            }\n            return;\n        }\n        prev[name] = value;\n        setInputs(prev);\n    }\n\n    async function handleOnSubmit(event) {\n        event.preventDefault();\n        setLoading(true);\n        const prev = inputs;\n        prev[\"hypoallergenic\"] = hypoallergenic;\n        prev[\"adoptionStatus\"] = adoptionStatus;\n        const fd = new FormData();\n        fd.append(\"petPicture\", petPicture);\n        for (let key in prev) {\n            fd.append(key, prev[key]);\n        }\n        try {\n            await editPet(fd, petId);\n            setSuccess(true);\n            setError(false);\n            setLoading(false);\n            setTimeout(() => {\n                history.go(0);\n            }, 3000)\n            \n        } catch (err) {\n            setError(true);\n            setLoading(false);\n        }\n    }\n\n    useEffect(() => {\n        async function fetchPet() {\n            const pet = await getPetById(petId);\n            const { type, picture, name, height, weight, color, bio, dietary_restrictions, breed } = pet;\n            if (pet.hypoallergenic === 1) setHypoallergenic(true);\n            else setHypoallergenic(false)\n            setAdoptionStatus(pet.adoption_status);\n            setInputs({\n                type,\n                petName: name,\n                height, \n                weight, \n                color, \n                bio,\n                dietaryRestrictions: dietary_restrictions,\n                breed,\n                petPicture: picture\n            });\n        }\n        fetchPet();\n    }, [petId]);\n\n    return (\n        <form\n            className=\"container d-flex flex-column justify-content-center\"\n            onSubmit={(event) => handleOnSubmit(event)}\n        >\n            <div className={styles.imageContainer}>\n                {inputs.petPicture !== \"null\" && <img className={styles.petPicture} src={inputs.petPicture} alt=\"Pet\"/>}\n                {inputs.petPicture === \"null\" && <span className=\"my-auto\">No Pet Picture Found!</span>}\n            </div>\n            \n\n            <label htmlFor=\"type\" className=\"col-form-label\">\n                Animal Type:\n            </label>\n            <select value={inputs.type} className=\"form-select\" name=\"type\" onChange={(event) => handleOnChange(event)}>\n                <option>Select an option...</option>\n                <option value=\"Dog\">Dog</option>\n                <option value=\"Cat\">Cat</option>\n                <option value=\"Parrot\">Parrot</option>\n                <option value=\"Hamster\">Hamster</option>\n                <option value=\"Rabbit\">Rabbit</option>\n                <option value=\"Ferret\">Ferret</option>\n                <option value=\"Mouse\">Mouse</option>\n                <option value=\"Spider\">Spider</option>\n                <option value=\"Turtle\">Turtle</option>\n                <option value=\"Snake\">Snake</option>\n                <option value=\"Iguana\">Iguana</option>\n                <option value=\"Other\">Other</option>\n            </select>\n\n            <label htmlFor=\"petName\" className=\"col-form-label\">\n                Pet Name:\n            </label>\n            <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"petName\"\n                name=\"petName\"\n                onChange={(event) => handleOnChange(event)}\n                value={inputs.petName ? inputs.petName : \"\"}\n                placeholder=\"Required\"\n                required\n            />\n            <label className=\"mt-3\">Pet Status:</label>\n            <div>\n                <div className=\"form-check\">\n                    <input\n                        onChange={() => {\n                            setAdoptionStatus(\"ADOPTED\");\n                        }}\n                        className=\"form-check-input\"\n                        type=\"radio\"\n                        name=\"adopted-status\"\n                        id=\"adopted-status\"\n                        checked={adoptionStatus === \"ADOPTED\"}\n                    />\n                    <label\n                        className=\"form-check-label\"\n                        htmlFor=\"adopted-status\"\n                    >\n                        Adopted\n                    </label>\n                </div>\n                <div className=\"form-check\">\n                    <input\n                        onChange={() => {\n                            setAdoptionStatus(\"FOSTERED\");\n                        }}\n                        className=\"form-check-input\"\n                        type=\"radio\"\n                        name=\"fostered-status\"\n                        id=\"fostered-status\"\n                        checked={adoptionStatus === \"FOSTERED\"}\n                    />\n                    <label\n                        className=\"form-check-label\"\n                        htmlFor=\"fostered-status\"\n                    >\n                        Fostered\n                    </label>\n                </div>\n                <div className=\"form-check\">\n                    <input\n                        onChange={() => {\n                            setAdoptionStatus(\"AVAILABLE\");\n                        }}\n                        className=\"form-check-input\"\n                        type=\"radio\"\n                        name=\"availabe-status\"\n                        id=\"available-status\"\n                        checked={adoptionStatus === \"AVAILABLE\"}\n                    />\n                    <label\n                        className=\"form-check-label\"\n                        htmlFor=\"available-status\"\n                    >\n                        Available\n                    </label>\n                </div>\n            </div>\n\n            <label htmlFor=\"petPicture\" className=\"col-form-label\">\n                Upload A New Picture:\n            </label>\n            <input\n                type=\"file\"\n                className=\"form-control\"\n                id=\"petPicture\"\n                name=\"petPicture\"\n                onChange={(event) => handleOnChange(event)}\n                accept=\"image/*\"\n            />\n\n            <label htmlFor=\"height\" className=\"col-form-label\">\n                Height (in m, round to the nearest hundredth):\n            </label>\n            <input\n                type=\"number\"\n                className=\"form-control\"\n                id=\"height\"\n                name=\"height\"\n                step=\".01\"\n                onChange={(event) => handleOnChange(event)}\n                value={inputs.height ? inputs.height : \"\"}\n                placeholder=\"Required\"\n                required\n            />\n\n            <label htmlFor=\"weight\" className=\"col-form-label\">\n                Weight (in kg, round to the nearest hundredth):\n            </label>\n            <input\n                type=\"number\"\n                className=\"form-control\"\n                id=\"weight\"\n                name=\"weight\"\n                step=\".01\"\n                onChange={(event) => handleOnChange(event)}\n                value={inputs.weight ? inputs.weight : \"\"}\n                placeholder=\"Required\"\n                required\n            />\n\n            <label htmlFor=\"color\" className=\"col-form-label\">\n                Color:\n            </label>\n            <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"color\"\n                name=\"color\"\n                onChange={(event) => handleOnChange(event)}\n                value={inputs.color ? inputs.color : \"\"}\n                placeholder=\"Required\"\n                required\n            />\n\n            <label htmlFor=\"bio\" className=\"col-form-label\">\n                Bio:\n            </label>\n            <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"bio\"\n                name=\"bio\"\n                onChange={(event) => handleOnChange(event)}\n                value={inputs.bio ? inputs.bio : \"\"}\n                placeholder=\"Required\"\n                required\n            />\n\n            <div>\n                <label className=\"mt-3\">Hypoallergenic:</label>\n                <div className=\"form-check\">\n                    <input\n                        onChange={() => {\n                            setHypoallergenic(!hypoallergenic);\n                        }}\n                        className=\"form-check-input\"\n                        type=\"radio\"\n                        name=\"hypoallergenic-yes\"\n                        id=\"hypoallergenic-yes\"\n                        checked={hypoallergenic}\n                    />\n                    <label\n                        className=\"form-check-label\"\n                        htmlFor=\"hypoallergenic-yes\"\n                    >\n                        Yes\n                    </label>\n                </div>\n                <div className=\"form-check\">\n                    <input\n                        onChange={() => {\n                            setHypoallergenic(!hypoallergenic);\n                        }}\n                        className=\"form-check-input\"\n                        type=\"radio\"\n                        name=\"hypoallergenic-no\"\n                        id=\"hypoallergenic-no\"\n                        checked={!hypoallergenic}\n                    />\n                    <label\n                        className=\"form-check-label\"\n                        htmlFor=\"hypoallergenic-no\"\n                    >\n                        No\n                    </label>\n                </div>\n            </div>\n\n            <label htmlFor=\"dietaryRestrictions\" className=\"col-form-label\">\n                Dietary Restrictions:\n            </label>\n            <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"dietaryRestrictions\"\n                name=\"dietaryRestrictions\"\n                onChange={(event) => handleOnChange(event)}\n                value={inputs.dietaryRestrictions ? inputs.dietaryRestrictions : \"\"}\n                placeholder=\"Required\"\n                required\n            />\n\n            <label htmlFor=\"breed\" className=\"col-form-label\">\n                Breed:\n            </label>\n            <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"breed\"\n                name=\"breed\"\n                onChange={(event) => handleOnChange(event)}\n                value={inputs.breed ? inputs.breed : \"\"}\n                placeholder=\"Required\"\n                required\n            />\n\n            {!loading && <button type=\"submit\" className=\"btn btn-primary mt-2 mb-3 w-50 mx-auto\">\n                Update Pet\n            </button>}\n            {success && (\n                <div className=\"alert alert-success\" role=\"alert\">\n                    Pet has been edited\n                </div>\n            )}\n            {loading && <div className=\"d-flex justify-content-center mt-3 mb-3\">\n                <div className=\"spinner-border text-primary\" role=\"status\">\n                    <span className=\"visually-hidden\">Loading...</span>\n                </div>\n            </div>}\n            {error && (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                    <p>Error adding pet:</p>\n                    <ul>\n                        <li>\n                            Make sure all the fields are in the correct format\n                        </li>\n                        <li>Make sure all the required fields are filled</li>\n                    </ul>\n                </div>\n            )}\n        </form>\n    );\n}\n\nexport default withRouter(FormComponent);\n"]},"metadata":{},"sourceType":"module"}